/*
    Vibra pan
    Fréquence par X.par 0
*/

// Idem 33, utilise partiel défini


var s = stralloc();
var k;

var clip = get(`gm, `cellAlt);
var part = get(`gm, `GvPlayPart);

sprintf(s, "Test 37 - Start - Clip %04d - Part %d", clip, part); GM_Log(s);

var w = 0.1; // wait

var stat = get(`gm, `cbStat);

w = get(`pval, `XtndP0)

sprintf(s, "    vars: %d, %f", stat, w); GM_Log(s);

var U = play(`clip, clip, `part, part, `unit);
wait(0.1);

while ((k = gmem[U + stat ]) === 3) (
   wait(0.01);
);

wait(0.1);

k = gmem[U + stat];
sprintf(s, "    status = %d", k); GM_Log(s);


// On recupère la valeur du paramètre "XtndP0" à chaque changement de volume.
//  "XtndP0" varie de 0 à 10000. On interprète ceci comme une valeur en ms,
//  et on divise par 1000 pour obtenir une valeur en secondes attendues par "wait"
while ((k = gmem[U + stat ]) === 258) (

    // Volume 1 à gauche 0 à droite
    player(U, 4, 1, 0);
    w = get(`pval, `XtndP0) / 1000;
    wait(w);

    // Volume 0 à gauche 1 à droite
    player(U, 4, 0, 1);
    w = get(`pval, `XtndP0) / 1000;
    wait(w);
);



GM_Log("Test 37 - End", " ");

strfree(s);
